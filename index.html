<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>æ¥½ãƒœãƒ¼ãƒˆ</title>

<style>
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(135deg, #1e3c72, #2a5298);
  padding: 20px;
  color: #333;
}

h1 {
  text-align: center;
  color: white;
  margin-bottom: 20px;
}

.card {
  background: #ffffff;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
  margin-bottom: 20px;
}

label {
  font-size: 14px;
  font-weight: bold;
  margin-top: 12px;
  display: block;
}

input {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #ddd;
  margin-top: 5px;
  font-size: 16px;
}

button {
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: none;
  background: #2a5298;
  color: white;
  font-size: 16px;
  font-weight: bold;
  margin-top: 15px;
  transition: 0.2s;
}

button:active {
  transform: scale(0.97);
}

.result {
  font-size: 22px;
  font-weight: bold;
  text-align: center;
  margin-top: 10px;
}

.plus { color: #00b894; }
.minus { color: #d63031; }

#message {
  text-align: center;
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>

<body>

<h1>æ¥½ãƒœãƒ¼ãƒˆ</h1>

<div class="card">

<label>æ—¥ä»˜</label>
<input type="date" id="date" />

<label>æŠ•è³‡é‡‘é¡</label>
<input type="number" id="bet" placeholder="ä¾‹: 3000" />

<label>æ‰•æˆ»é‡‘é¡</label>
<input type="number" id="pay" placeholder="ä¾‹: 5400" />

<button onclick="saveRecord()">ä¿å­˜ã™ã‚‹</button>

<div class="result">
  ä»Šæ—¥ã®åæ”¯: <span id="todayProfit" class="result">Â¥0</span>
</div>

<div id="message"></div>

</div>

<script>
let records = JSON.parse(localStorage.getItem("records")) || [];

function formatYen(num){
  return "Â¥" + num.toLocaleString();
}

function saveRecord(){
  const bet = Number(document.getElementById("bet").value);
  const pay = Number(document.getElementById("pay").value);
  const date = document.getElementById("date").value;

  if(!date || !bet){
    alert("æ—¥ä»˜ã¨æŠ•è³‡é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ã­");
    return;
  }

  records.push({ bet, pay, date });
  localStorage.setItem("records", JSON.stringify(records));

  updateToday();
  alert("ä¿å­˜ã—ã¾ã—ãŸï¼");
}

function updateToday(){
  const today = new Date().toISOString().slice(0,10);
  const todays = records.filter(r => r.date === today);

  const totalBet = todays.reduce((a,b)=>a+b.bet,0);
  const totalPay = todays.reduce((a,b)=>a+b.pay,0);

  const profit = totalPay - totalBet;

  const profitEl = document.getElementById("todayProfit");
  profitEl.innerText =
    (profit >= 0 ? "+" : "") + formatYen(profit);
  profitEl.className =
    "result " + (profit >= 0 ? "plus" : "minus");

  const msg = document.getElementById("message");
  if(profit < 0){
    msg.innerText = "ä»Šæ—¥ã¯ã“ã“ã¾ã§ã«ã—ã‚ˆã€‚æ·±è¿½ã„æ³¨æ„âš ï¸";
  } else {
    msg.innerText = "ã„ã„æ„Ÿã˜ã€‚ã§ã‚‚ç„¡ç†ã—ã™ããªã„ã§ğŸ‘";
  }
}

updateToday();
</script>

</body>
</html>
